<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="stores">
	<!-- 식당 리스트 저전체보기 -->
	<select id="findByAll" resultType="data.Restaurants">
		SELECT * FROM RESTAURANTS
	</select>
	<!-- 식당 전체 갯수 가져오기 -->
	<select id="countStore" resultType="int">
		SELECT COUNT(*) FROM
		RESTAURANTS
	</select>
	<!-- 식당 리스트 n개 보기 -->
	<select id="findByAtoB" resultType="data.Restaurants">
		SELECT * FROM
		(SELECT ROWNUM RN, t.* FROM
		(SELECT * FROM RESTAURANTS ORDER BY
		<choose>
			<when test="id != null">
				#{id}
			</when>
			<otherwise>
				name
			</otherwise>
		</choose>
		DESC) t
		) WHERE RN BETWEEN #{a} AND #{b}
	</select>
	<!-- 별점순 식당 가져오기 -->
	<select id="1" resultType="data.Store" parameterType="hashmap">

	</select>

	<!--detail페이지 id로 정보 가져오기 -->
	<select id="findById" resultType="data.Restaurants">
		select * from
		(SELECT * from restaurants
		join resimg on restaurants.id = resimg.id
		where restaurants.id = #{id})
		where rownum = 1
	</select>

</mapper>